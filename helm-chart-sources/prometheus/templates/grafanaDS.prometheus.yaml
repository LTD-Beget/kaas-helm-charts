{{- if .Values.monitoring.grafana.datasource.enabled }}
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDatasource
metadata:
  name: grafana-datasource
  namespace: {{ .Values.monitoring.grafana.datasource.namespace }}
spec:
  instanceSelector:
    matchLabels:
      dashboards: {{ .Values.monitoring.grafana.datasource.selector | default "grafana" }}
  datasource:
    name: {{ .Values.monitoring.grafana.datasource.name }}
    type: {{ .Values.monitoring.grafana.datasource.type }}
    access: proxy
    isDefault: true
    url: {{ .Values.monitoring.grafana.datasource.url }}
      {{- if .Values.monitoring.grafana.datasource.jsonData }}
    jsonData:
        {{ toYaml .Values.monitoring.grafana.datasource.jsonData | indent 6 }}
      {{- end }}

{{- end }}