apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ./base.yaml

patches:
  - path: ./deployment.argocd-server.yaml
    target:
      kind: Deployment
      name: argocd-server

  - path: ./service.argocd-server.yaml
    target:
      kind: Service
      name: argocd-server-metrics

  - path: ./deployment.argocd-repo-server.yaml
    target:
      kind: Deployment
      name: argocd-repo-server

  - path: ./service.argocd-repo-server.yaml
    target:
      kind: Service
      name: argocd-repo-server-metrics

  - path: ./deployment.argocd-applicationset-controller.yaml
    target:
      kind: Deployment
      name: argocd-applicationset-controller

  - path: ./service.argocd-applicationset-controller.yaml
    target:
      kind: Service
      name: argocd-applicationset-controller-metrics

  - path: ./statefulset.argocd-application-controller.yaml
    target:
      kind: StatefulSet
      name: argocd-application-controller

  - path: ./service.argocd-application-controller.yaml
    target:
      kind: Service
      name: argocd-application-controller-metrics

  - path: ./deployment.argocd-redis.yaml
    target:
      kind: Deployment
      name: argocd-redis

  - path: ./service.argocd-redis.yaml
    target:
      kind: Service
      name: argocd-redis-metrics
