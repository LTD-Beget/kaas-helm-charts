{{- if .Values.addons.argocd.enabled }}
{{- $clientContext := set (deepCopy .) "Values" (set (deepCopy .Values) "environment" "client") -}}

{{ tpl (.Files.Get "files/argocd/addon.yml") . }}
{{ .Files.Get "files/argocd/values.yml" }}

{{ tpl (.Files.Get "files/argocd/phase.yml") . }}

{{ tpl (.Files.Get "files/argocd/phase.yml") $clientContext }}
{{- end }}
