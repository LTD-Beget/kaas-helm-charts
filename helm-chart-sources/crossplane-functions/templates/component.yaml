{{- range $componentName, $componentValue := .Values.components }}
{{- if $componentValue.enabled }}
---
apiVersion: pkg.crossplane.io/v1
kind: {{ $componentValue.kind }}
metadata:
  annotations:
    argocd.argoproj.io/sync-wave: "0"
  name: {{ $componentValue.name }}
spec:
  package: {{ $componentValue.package }}:{{ $componentValue.tag }}
  packagePullPolicy: {{ $componentValue.packagePullPolicy }}
  runtimeConfigRef:
    name: {{ $.Release.Name }}-{{ $componentValue.name }}

{{- end }}
{{- end }}

