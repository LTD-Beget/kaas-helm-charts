{{- range $componentName, $componentValue := .Values.components }}
  {{- if $componentValue.enabled }}
  {{- if eq $componentValue.kind "Provider" }}
---
apiVersion: {{ $componentName }}.crossplane.io/v1alpha1
kind: ProviderConfig
metadata:
  annotations:
    argocd.argoproj.io/sync-wave: "1"
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
  name: default
spec:
      {{- toYaml $componentValue.providerConfig | nindent 2 }}
    {{- end }}
  {{- end }}
{{- end }}

